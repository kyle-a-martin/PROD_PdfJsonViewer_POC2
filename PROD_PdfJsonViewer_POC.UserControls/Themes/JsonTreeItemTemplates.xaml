<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:models="clr-namespace:PROD_PdfJsonViewer_POC.UserControls.Models"
                    xmlns:local="clr-namespace:PROD_PdfJsonViewer_POC.UserControls.Controls"
                    xmlns:converters="clr-namespace:PROD_PdfJsonViewer_POC.UserControls.Converters"
                    xmlns:helper="clr-namespace:PROD_PdfJsonViewer_POC.UserControls.Helper">

    <converters:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter" />
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <!-- DataTemplate for leaf nodes (values) -->
        <DataTemplate x:Key="JsonLeafTemplate" DataType="{x:Type models:JsonTreeItem}">
            <StackPanel Orientation="Horizontal" Margin="2">
                <TextBlock Text="{Binding Key}" FontWeight="Bold" Margin="0,0,5,0"/>
                <TextBlock Text=": " />
                <!-- Editable TextBox -->
                <TextBox Text="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                         Visibility="{Binding DataContext.IsEditable, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource BooleanToVisibilityConverter}}"
                         AcceptsReturn="True" TextWrapping="Wrap" MinHeight="30" Margin="5,0,0,0" Width="200"/>
                <!-- Read-only TextBlock -->
                <TextBlock Text="{Binding Value}" 
                           Visibility="{Binding DataContext.IsEditable, RelativeSource={RelativeSource AncestorType=UserControl}, Converter={StaticResource InverseBooleanToVisibilityConverter}}"
                           TextWrapping="Wrap" MinHeight="30" Margin="5,0,0,0" Width="200"/>
            </StackPanel>
        </DataTemplate>

        <!-- HierarchicalDataTemplate for group nodes (objects/arrays) -->
        <HierarchicalDataTemplate x:Key="JsonBranchTemplate" DataType="{x:Type models:JsonTreeItem}" ItemsSource="{Binding Children}">
            <StackPanel Orientation="Horizontal" Margin="2">
                <TextBlock Text="{Binding Key}" FontWeight="Bold" Margin="0,0,5,0"/>
                <!-- Optionally add a label such as (Group) if desired -->
                <TextBlock Text="(Group)" Foreground="Gray" Margin="0,0,5,0"/>
            </StackPanel>
        </HierarchicalDataTemplate>

    <!--<helper:JsonTreeItemTemplateSelector x:Key="JsonTreeItemTemplateSelector"
                                            LeafTemplate="{StaticResource JsonLeafTemplate}"
                                            BranchTemplate="{StaticResource JsonBranchTemplate}" />-->

</ResourceDictionary>